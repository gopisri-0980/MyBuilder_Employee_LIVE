<style>
  .backbutton {
    position: absolute;
    right: 24px;
    top: 98px;
    width: auto;
    color: #FFF;
    background: #F44336;
    border: none;
  }

  .marksofcomplaint {
    position: relative;
    right: 0;
    top: -12px;
  }

  .loadercls {
    position: relative;
    left: 8px;
    font-size: 12px;
    width: 20px;
    height: 20px;
    top: 2px;
  }
</style>



<section class="content">
  <div class="container-fluid">
    <div class="block-header">
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <ul class="breadcrumb breadcrumb-style ">

            <li class="breadcrumb-item">
              <h4 class="page-title">Approve Escalation Details</h4>
            </li>
            <li class="breadcrumb-item bcrumb-1">
              <a>
                <i class="fas fa-home" (click)="homeClick()"></i> Ticketing</a>
            </li>
            <!-- <li class="breadcrumb-item bcrumb-1">
                <a>0.
                    <i class="fas fa-home" (click)="homeClick()"></i><span (click)="approveEscalationlist()">Approve Escalation</span></a>
            </li> -->
            <li class="breadcrumb-item bcrumb-2">
              <a href="#" onClick="return false;" (click)="approveEscalationlist()">Approve Escalation Time</a>
            </li>
            <!-- <li class="breadcrumb-item bcrumb-2">
                <a href="#" onClick="return false;">Approve Escalation</a>
              </li> -->
            <li class="breadcrumb-item bcrumb-2">
              <a href="#" onClick="return false;">Approve Escalation Details</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-content">
    <!-- Accounts tab start -->
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-lg-8">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-xs-12 col-sm-12 col-lg-6">

                <h3>Remarks</h3>
                <p>{{remarks}}</p>
              </div>
              <div class="col-xs-12 col-sm-12 col-lg-6">
                <h3>Requested Escalation Date</h3>
                <p>{{requestedEscalationDate| date : 'EEEE, MMMM d, y'}}</p>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h3>Ticket</h3>
            <p>{{this.ticketINfomessage}}</p>
          </div>
        </div>

        <div class="card">
          <div class="card-body">

            <div class="row">
              <div class="col-xs-6 col-sm-6 col-lg-11">
                <h4>Ticket Replies</h4>
              </div>
              <div class="col-xs-6 col-sm-6 col-lg-1">
                <i style="font-size:24px" class="fa" (click)="getTicketDetails()">&#xf021;</i>
              </div>
            </div>
            <ul class="list-unstyled m-t-40" style="height: 500px; overflow-y: auto">
              <div *ngFor="let data of ticketmessageData">
                <li class="media">
                  <img alt="Generic placeholder image" class="m-r-15" alt="user_image"
                    src="https://img.icons8.com/bubbles/2x/user.png" width="60">
                  <!-- <img *ngIf="data.profilepic != null" alt="Generic placeholder image" class="m-r-15"
                    src="{{data.profilepic}}" width="60"> -->
                  <div class="media-body" style="float:left">
                    <h5 class="mt-0 mb-1">{{data.name}}</h5>
                    <p>{{data.desc}}</p>
                    <p><span [innerHTML]="data.message"></span>&nbsp;&nbsp;<span class="pull-right">{{data.commentsDate|
                        date : 'fullDate'}}</span>
                    </p>
                  </div>
                </li>
                <hr>
              </div>
            </ul>
          </div>
        </div>

      </div>
      <div class="col-lg-4">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title" style="margin-bottom: -1.25rem;">Ticket Info</h4>
          </div>
          <!-- <div class="card-body bg-light">
                <div class="row text-center">
                  <div class="col-6 m-t-10 m-b-10">
                    <span class="label label-warning">{{proj_status}}</span>
                  </div>
                  <div class="col-6 m-t-10 m-b-10">{{created_date| date : 'fullDate'}}</div>
                </div>
              </div> -->
          <div class="card-body">
            <div class="row clearfix">
              <div class="col-md-6">
                <h5 class="m-t-30">Ticket Type</h5><span>{{ticketType}}</span>
                <h5 class="m-t-30">Status</h5><span>{{proj_status}}</span>
                <h5 class="m-t-30">Pending Department</h5><span>{{pending_department}}</span>
                <h5 class="p-t-20">Flat Number</h5><span><a href="javascript:void(0);"
                    (click)="viewflatDetails(customer_id,flat_Id)">{{flat_number}}</a></span>
              </div>
              <div class="col-md-6">
                <h5 class="m-t-30">Ticket Number</h5><span>{{ticketIdd}}</span>
                <h5 class="m-t-30">Created Date</h5>
                <span>{{created_date| date : 'EEEE, MMMM d, y h:mm a'}}</span>
                <h5 class="m-t-30">Escalation Date</h5><span>{{estimated_date| date : 'EEEE, MMMM d, y h:mm a'}}</span>
                <h5 class="m-t-30">Project Name</h5><span>{{proj_name}}</span>
              </div>
            </div>
          </div>
        </div>



        <div class="card">
          <div class="card-body" style="height:360px;overflow-y: auto" id="customerinfoid1">

            <div class="card-body text-center">
              <h4 class="card-title">Attachments</h4>
            </div>
            <div class="row text-center">

              <ul class="list-unstyled">
                <div *ngFor="let item of pdflist">
                  <li class="media">
                    <img src="assets/images/file1.jpg" (click)="pdfClick(item.url)" class="m-r-15" width="60">
                    <div class="media-body" style="float:left;margin-right: 20px;">
                      <p style="text-align: left;" class="mt-0 mb-1">
                        <span *ngIf="item.createdType=='CUSTOMER'"
                          style="width: 80%;float: left;word-break: break-all;font-size: 16px;font-weight: 600;">Customer:
                          {{item.createdBy}}</span>
                        <span *ngIf="item.createdType=='EMPLOYEE'"
                          style="width: 80%;float: left;word-break: break-all;font-size: 16px;font-weight: 600;">{{item.createdBy}}</span>
                        <span style="float: left;width: 20%;"><img *ngIf="item.visibilty == 2" class="m-r-15"
                            src="assets/images/filename.png" (click)="makeasPublic(item.name,item.id)"
                            style="float: right;margin-right: 0px;height: 30px;width: 30px;"></span>
                      </p>
                      <p style="text-align: left;word-break: break-all;margin-top: 13px;clear: both;">{{item.name}}</p>
                    </div>
                  </li>
                  <hr>
                </div>
              </ul>

            </div>
          </div>




          <div style="position: absolute;
          margin-top: 40%;
          width: 100%;
          text-align: center;" *ngIf="customerhideme1">
              <button [disabled]="loading1" class="btn-hover color-1" style="width: auto;font-size: 15px;height: auto!important;text-align: left;padding: 10px;"
                (click)="Attachmentsfun()">
                Click here to view attachments
                <span *ngIf="loading1" class="spinner-border spinner-border-sm mr-1 loadercls"></span>
              </button>
            </div>
        </div>





        
      <div class="card">
        <div class="card-body text-center" id="customerinfoid">
          <h4 class="card-title">Customer Info</h4>
          <div class="profile-pic m-b-20 m-t-20">
            <!-- <img id="customerinfoid" *ngIf="this.profilepic != null" alt="user" class="rounded-circle"
              src="{{this.profilepic}}" width="150"> -->
            <img id="customerinfoid"  alt="user" class="rounded-circle"
              src="assets/images/customerimage.png" width="150">

            <!-- <h4 class="m-t-20 m-b-0"><a href="javascript:void(0)"
                (click)="viewCustomerDetails(customer_id,flat_Id)"><span>{{customer_name}}</span></a>
            </h4><a>{{customer_email}}</a> -->
          </div>
          <div class="row text-center m-t-40">
            <div class="col-4">
              <h3 class="font-bold">{{total_tickets}}</h3>
              <h6>Total</h6>
            </div>
            <div class="col-4">
              <h3 class="font-bold">{{total_open}}</h3>
              <h6>Open</h6>
            </div>
            <div class="col-4">
              <h3 class="font-bold">{{tickets_closed}}</h3>
              <h6>Closed</h6>
            </div>
          </div>
        </div>

        <div style="position: absolute;
           margin-top: 40%;
           width: 100%;
           text-align: center;" *ngIf="customerhideme">
          <button [disabled]="loading2" class="btn-hover color-1" style="width:200px!important;font-size: 15px;"
            (click)="Customerinfofun()">
            Customer Info
            <span *ngIf="loading2" class="spinner-border spinner-border-sm mr-1 loadercls"></span>
          </button>
        </div>


      </div>






      </div>
    </div>
  </div>

  <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
    <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Approve Escalation Date Extension</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <label for="leave_start_date">Approval Date</label>
            <div class="row clearfix">
              <div class="col-lg-10 col-md-10 col-sm-8 col-xs-7">
                <div class="form-group">
                  <div class="form-line">
                    <input type="text" class="datepicker form-control" placeholder="Please choose date"
                      id="escalationDate">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class=" text-center center-block">
              <button type="button" class="btn-hover color-1 cancelBtnColor" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn-hover color-1" (click)="approveClick()">Submit</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="col-xs-12 col-sm-12 col-lg-8">
    <div class="card">
      <div class="card-body">
        <h3>Remarks</h3>
        <p>{{remarks}}</p>
      </div>
    </div>
  </div> -->
  <!-- <input type="text" class="datepicker form-control" style="display: block;" placeholder="Please choose date" id="escalationDate"> -->
  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin-bottom:10px">
    <button class="m-t-20 btn btn-warning btn-border-radius waves-effect m-r-10" type="button"
      (click)="approveClickModal()">Approve</button>
    <button class="m-t-20 btn btn-warning btn-border-radius waves-effect m-r-10" type="button"
      (click)="rejectClick()">Reject</button>
  </div>
</section>